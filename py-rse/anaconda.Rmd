# Anaconda {#anaconda}

When people first started using Python for data science,
installing the relevant libraries could be difficult.
The main problem was that the Python package installer (pip)
only worked for libraries written in pure Python.
Many scientific Python libraries have C and/or Fortran dependencies,
so it was left up to data scientists
(who often do not have a background in system administration)
to figure out how to install those dependencies themselves.
To overcome this problem,
a number of scientific Python “distributions” have been released over the years.
These come with the most popular data science libraries and their dependencies pre-installed,
and some also come with a package manager to assist
with installing additional libraries that weren’t pre-installed.
Today the most popular distribution for data science is Anaconda,
which comes with a package manager called conda.

## Package management with conda {anaconda-conda-package-management}

According to the [latest documentation](https://docs.anaconda.com/anaconda/#anaconda-navigator-or-conda),
Anaconda comes with over 250 of the most widely used data science libraries (and their dependencies) pre-installed.
In addition, there are several thousand libraries available via the `conda install` command,
which can be executed at the command line or by using the Anaconda Navigator graphical user interface.
A package manager like conda greatly simplifies the software installation process
by identifying and installing compatible versions of software and all required dependencies.
It also handles the process of updating software as more recent versions become available.
If you don’t want to install the entire Anaconda distribution,
you can install [Miniconda](https://docs.conda.io/en/latest/miniconda.html) instead.
It essentially comes with conda and nothing else.

FIXME: Create a figure like [this](https://github.com/carpentries-incubator/introduction-to-conda-for-data-scientists/blob/gh-pages/fig/miniconda_vs_anaconda.png).

### Anaconda cloud

What happens if we want to install a Python package
that isn't on the list of the few thousand or so most popular data science packages
(i.e. the ones that are automatically available via the `conda install` command)?
The answer is the [Anaconda Cloud](https://anaconda.org/) website,
where the community can post conda installation packages.

The utility of the Anaconda Cloud to research software engineers
is best illustrated by an example. 
A few years ago, an atmospheric scientist by the name of Andrew Dawson
wrote a Python package called [eofs](https://ajdawson.github.io/eofs/latest/)
for doing empirical orthogonal function (EOF) analysis.
While many of Andrew's colleagues routinely use EOF analysis,
atmospheric science is a relatively small field and thus the eofs package
will never have a big enough user base to make the list of
popular packages supported by Anaconda.
Andrew has therefore posted a conda installation package to Anaconda Cloud
(Figure \@ref(fig:anaconda-)) so that users can install eofs using conda:

```shell 
$ conda install -c ajdawson eofs
```

```{r anaconda-eofs-ajdawson, echo=FALSE, fig.cap="Andrew Dawson's conda installation package for eofs on Anaconda Cloud"}
knitr::include_graphics("figures/py-rse/anaconda/cloud-eofs-ajdawson.png")
```

TODO: Link this section to the exercise in the packaging chapter about making a conda installation package.
(This will effectively be a dummy installation package otherwise there would be lots of zipf packages...)

### conda forge

It turns out there are often multiple versions of the same package up on Anaconda Cloud (e.g. Figure X). 
To try and address this duplication problem [conda-forge](https://conda-forge.org/) was launched,
which aims to be a central repository that contains just a single (working)
version of each package on Anaconda Cloud.
You can therefore expand the selection of packages available via conda install
beyond the chosen few thousand by adding the conda-forge channel:

```shell
$ conda config --add channels conda-forge
```

```{r anaconda-eofs-search, echo=FALSE, fig.cap="Search results for the eofs package on Anaconda Cloud"}
knitr::include_graphics("figures/py-rse/anaconda/cloud-eofs-search.png")
```

## Environment management with conda

TODO: Explain environment management (give virtualenv a mention too).
TODO: Link this section to the virtual environments section in the packaging chapter.






